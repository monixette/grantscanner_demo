<!DOCTYPE html>
<html lang="en" data-theme="light">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Grant Scanner â€” Generating Proposal</title>
    <link rel="stylesheet" href="shared.css" />
    <style>
        .gen-center {
            max-width: 600px;
            margin: 0 auto;
            text-align: center;
        }

        .gen-status-label {
            font-size: 12px;
            font-weight: 600;
            color: var(--muted2);
            letter-spacing: .3px;
            margin-top: 12px;
        }

        .gen-list {
            text-align: left;
            max-width: 560px;
            margin: 0 auto;
        }
    </style>
</head>

<body>
    <nav class="navbar">
        <a href="index.html" class="navbar-brand">
            <div class="brand-icon">GS</div>
            <div><span class="brand-name">Grant Scanner</span><span class="brand-org">Accountability Lab Mexico</span>
            </div>
        </a>
        <div class="navbar-links">
            <a href="index.html" class="nav-link">ğŸ  Dashboard</a>
            <a href="grant.html" class="nav-link">ğŸ“‹ Grant Detail</a>
            <a href="score.html" class="nav-link">ğŸ“Š Score</a>
            <a href="#" class="nav-link active">âš™ï¸ Generating</a>
        </div>
        <div class="navbar-actions">
            <span class="nav-badge">Mapeo 2026</span>
            <button class="theme-toggle" id="themeToggle">ğŸŒ™</button>
        </div>
        <button class="burger" id="burgerBtn" aria-label="Open menu"><span></span><span></span><span></span></button>
    </nav>
    <div class="mobile-drawer" id="mobileDrawer">
        <a href="index.html" class="mobile-nav-link">ğŸ  Dashboard</a>
        <a href="#" class="mobile-nav-link active">âš™ï¸ Generating</a>
        <div style="padding-top:8px;border-top:1px solid var(--border);">
            <button class="mobile-nav-link w-full" style="text-align:left;" onclick="toggleTheme()"><span
                    id="mobileThemeLabel">ğŸŒ™ Switch to Light Mode</span></button>
        </div>
    </div>

    <div class="page-wrap">
        <div class="container">

            <div class="gen-center mb-28">
                <div class="gen-orb" id="genOrb"></div>
                <h1 class="page-title" style="font-size:24px;">Drafting Proposalâ€¦</h1>
                <p class="page-sub mb-20">Grant Scanner is reading the call, synthesizing AL Mexico's portfolio, and
                    writing a tailored application.</p>

                <!-- Progress bar -->
                <div class="gen-progress-track mb-8">
                    <div class="gen-progress-fill" id="genProgress"></div>
                </div>
                <div class="gen-status-label" id="genStatusLabel">Initializing pipelineâ€¦</div>
            </div>

            <!-- Step list -->
            <div class="card gen-list mb-20" style="padding:0;overflow:hidden;">
                <div class="gen-step" id="step1">
                    <div class="step-icon" id="si1">ğŸ“¡</div>
                    <span>Fetching live call data Â· fundacionmerced.org.mx/ideas2026</span>
                </div>
                <div class="gen-step" id="step2">
                    <div class="step-icon" id="si2">ğŸ—‚ï¸</div>
                    <span>Loading AL Mexico organizational profile &amp; portfolio</span>
                </div>
                <div class="gen-step" id="step3">
                    <div class="step-icon" id="si3">ğŸ”</div>
                    <span>Cross-referencing eligibility criteria Â· CategorÃ­a 2 match</span>
                </div>
                <div class="gen-step" id="step4">
                    <div class="step-icon" id="si4">âœï¸</div>
                    <span>Drafting Section 1 â€” Organizational Context &amp; Mission</span>
                </div>
                <div class="gen-step" id="step5">
                    <div class="step-icon" id="si5">ğŸ“</div>
                    <span>Drafting Section 2 â€” Project Description &amp; Objectives</span>
                </div>
                <div class="gen-step" id="step6">
                    <div class="step-icon" id="si6">ğŸ“Š</div>
                    <span>Drafting Section 3 â€” Theory of Change &amp; Impact Logic</span>
                </div>
                <div class="gen-step" id="step7">
                    <div class="step-icon" id="si7">ğŸ’°</div>
                    <span>Drafting Section 4 â€” Budget Framework (no salaries)</span>
                </div>
                <div class="gen-step" id="step8">
                    <div class="step-icon" id="si8">âœ…</div>
                    <span>Final review Â· Compliance check Â· Formatting output</span>
                </div>
            </div>

        </div>
    </div>

    <div class="bottom-bar">
        <div class="bottom-steps">
            <div class="bottom-dot done"></div>
            <div class="bottom-dot done"></div>
            <div class="bottom-dot done"></div>
            <div class="bottom-dot done"></div>
            <div class="bottom-dot active"></div>
            <div class="bottom-dot"></div>
        </div>
        <span class="text-sm text-muted">Step 5 of 6 â€” Generating</span>
        <a href="output.html" class="btn btn-primary" id="viewBtn" style="opacity:.4;pointer-events:none;">View Proposal
            â†’</a>
    </div>

    <script src="app.js"></script>
    <script>
        const steps = [1, 2, 3, 4, 5, 6, 7, 8];
        const labels = [
            'Fetching live grant dataâ€¦',
            'Loading organizational profileâ€¦',
            'Running eligibility checkâ€¦',
            'Writing Section 1â€¦',
            'Writing Section 2â€¦',
            'Writing Section 3â€¦',
            'Writing Section 4â€¦',
            'Finalizing documentâ€¦'
        ];

        steps.forEach((n, i) => {
            setTimeout(() => {
                const el = document.getElementById('step' + n);
                const si = document.getElementById('si' + n);
                el.classList.add('visible');
                document.getElementById('genStatusLabel').textContent = labels[i];
                // Progress
                const pct = Math.round(((i + 1) / steps.length) * 100);
                document.getElementById('genProgress').style.width = pct + '%';
                // Mark prev done
                if (i > 0) {
                    document.getElementById('si' + steps[i - 1]).textContent = 'âœ“';
                    document.getElementById('step' + steps[i - 1]).classList.add('done');
                }
                if (i === steps.length - 1) {
                    setTimeout(() => {
                        si.textContent = 'âœ“';
                        el.classList.add('done');
                        document.getElementById('genStatusLabel').textContent = 'Proposal complete â€” ready to review';
                        document.getElementById('genOrb').style.animation = 'none';
                        document.getElementById('genOrb').style.boxShadow = '0 0 40px rgba(16,185,129,.4)';
                        const btn = document.getElementById('viewBtn');
                        btn.style.opacity = '1';
                        btn.style.pointerEvents = 'auto';
                    }, 600);
                }
            }, 800 + i * 900);
        });
    </script>
</body>

</html>